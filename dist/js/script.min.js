document.addEventListener("DOMContentLoaded",(()=>{document.querySelector(".questions__content");const e=document.querySelectorAll(".questions__line"),t=document.querySelectorAll(".questions__text"),n=document.querySelectorAll(".questions__line-arrow"),o=[];t.forEach((e=>{o.push(parseInt(window.getComputedStyle(e).height)),e.style.height=0})),e.forEach(((e,c)=>{e.addEventListener("click",(e=>{t[c].classList.toggle("questions__text-active"),n[c].classList.toggle("rotate"),t[c].classList.contains("questions__text-active")?t[c].style.height=`${o[c]+13}px`:t[c].style.height=0}))}));const c=document.querySelector(".examples__slider-inner"),s=document.querySelector(".examples__slider-arrow_right"),a=document.querySelectorAll(".examples__slide"),l=document.querySelector(".examples__slider-arrow_left"),r=parseInt(window.getComputedStyle(a[0]).width),d=document.querySelector(".dots__container_examples"),i=[];let u=0;function _(e=0){u+=e,u>a.length-1&&(u=0),u<0&&(u=a.length-1),i.forEach((e=>{e.classList.remove("dot_active")})),i[u].classList.add("dot_active"),c.style.transform=`translateX(-${u*r}px)`}c.style.width=r*a.length+"px",s.addEventListener("click",(()=>{_(1)})),l.addEventListener("click",(()=>{_(-1)})),a.forEach((e=>{const t=document.createElement("div");t.classList.add("dot"),i.push(t),d.append(t)})),d.addEventListener("click",(e=>{const t=e.target;i.forEach(((e,n)=>{t&&e===t&&(u=0,_(n))}))})),_();const m=document.querySelectorAll(".reviews__slide"),h=document.querySelector(".reviews__dots"),v=[];m.forEach((e=>{const t=document.createElement("div");t.classList.add("dot"),v.push(t),h.append(t)})),h.addEventListener("click",(e=>{const t=e.target;v.forEach(((e,n)=>{e.classList.remove("dot_active"),t&&e===t&&(e.classList.add("dot_active"),m.forEach((e=>{e.style.display="none"})),m[n].style.display="flex")}))})),v[0].click();const y=document.querySelector(".hamburger"),p=document.querySelector(".header__nav");y.addEventListener("click",(()=>{p.classList.toggle("header__nav_active"),y.classList.toggle("hamburger_active")}));const f=document.querySelector(".form"),q=document.querySelectorAll(".form__input"),E=(document.querySelector(".form__btn"),"Мы вам перезвоним"),g="Отправляем...",S="Что-то пошло не так";f.addEventListener("submit",(e=>{e.preventDefault();const t=document.createElement("div");t.textContent=g,f.append(t);const n=new FormData(f);(async function(e,t){const n=await fetch(e,{method:"POST",body:t,headers:{"Content-type":"application/json"}});return await n.json()})("http://localhost:250/requests",JSON.stringify(Object.fromEntries(n.entries()))).then((()=>{t.textContent=E})).catch((()=>{t.textContent=S})).finally((()=>{setTimeout((()=>{t.remove(),q.forEach((e=>{e.value=""}))}),2e3)}))}));const L=document.querySelector(".flavor__content");(async function(e){const t=await fetch(e);return await t.json()})("http://localhost:250/flavors").then((e=>{e.forEach((({title:e,img:t,alt:n,lines:o})=>{!function(e,t,n,o){const c=document.createElement("div");c.classList.add("flavor__card"),c.innerHTML=`\n        <div class="flavor__card-descr">\n        <div class="flavor__card-title">${e}</div>\n\n    </div>\n    <img src="${t}" alt="${n}" class="flavor__card-img">\n        `,o.forEach((e=>{const t=document.createElement("div");t.classList.add("flavor__card-line"),t.textContent=`${e}`,c.querySelector(".flavor__card-descr").append(t)})),L.append(c)}(e,t,n,o)}))}));const x=document.querySelector(".calc__total span"),w=document.querySelectorAll(".calc__select"),b=document.querySelector(".kilos-input");function k(){const e=[];w.forEach((t=>{t.getAttribute("data-size")&&("kilos"===t.value?(b.style.display="block",e.push(100*+b.value)):b.style.display="none"),"kilos"!==t.value&&e.push(+t.value)})),x.textContent=e.reduce(((e,t)=>e+t))}w.forEach((e=>{e.addEventListener("change",(()=>{e.querySelector("option").setAttribute("disabled","disabled"),k()}))})),b.addEventListener("input",(()=>{k()}))}));