document.addEventListener("DOMContentLoaded",(()=>{document.querySelector(".questions__content");const e=document.querySelectorAll(".questions__line"),t=document.querySelectorAll(".questions__text"),o=document.querySelectorAll(".questions__line-arrow"),c=[];t.forEach((e=>{c.push(parseInt(window.getComputedStyle(e).height)),e.style.height=0})),e.forEach(((e,n)=>{e.addEventListener("click",(e=>{t[n].classList.toggle("questions__text-active"),o[n].classList.toggle("rotate"),t[n].classList.contains("questions__text-active")?t[n].style.height=`${c[n]+13}px`:t[n].style.height=0}))}));const n=document.querySelector(".examples__slider-inner"),r=document.querySelector(".examples__slider"),s=document.querySelector(".examples__slider-arrow_right"),a=document.querySelectorAll(".examples__slide"),l=document.querySelector(".examples__slider-arrow_left"),i=parseInt(window.getComputedStyle(a[0]).width),d=document.querySelector(".dots__container_examples"),u=[];r.style.width=2.5*i+"px";let _=0;function m(e=0){_+=e,_>a.length-1&&(_=0),_<0&&(_=a.length-1),u.forEach((e=>{e.classList.remove("dot_active")})),u[_].classList.add("dot_active"),n.style.transform=`translateX(-${_*i}px)`}n.style.width=i*a.length+"px",s.addEventListener("click",(()=>{m(1)})),l.addEventListener("click",(()=>{m(-1)})),a.forEach((e=>{const t=document.createElement("div");t.classList.add("dot"),u.push(t),d.append(t)})),d.addEventListener("click",(e=>{const t=e.target;u.forEach(((e,o)=>{t&&e===t&&(_=0,m(o))}))})),m();const h=document.querySelectorAll(".reviews__slide"),v=document.querySelector(".reviews__dots"),p=[];h.forEach((e=>{const t=document.createElement("div");t.classList.add("dot"),p.push(t),v.append(t)})),v.addEventListener("click",(e=>{const t=e.target;p.forEach(((e,o)=>{e.classList.remove("dot_active"),t&&e===t&&(e.classList.add("dot_active"),h.forEach((e=>{e.style.display="none"})),h[o].style.display="flex")}))})),p[0].click();const y=document.querySelector(".hamburger"),f=document.querySelector(".header__nav");y.addEventListener("click",(()=>{f.classList.toggle("header__nav_active"),y.classList.toggle("hamburger_active")}));const q=document.querySelector(".form"),E=document.querySelectorAll(".form__input"),g=document.querySelector(".form__checkbox"),S="Мы вам перезвоним",L="Отправляем...",x="Что-то пошло не так",b=document.querySelector(".calc__total span"),w=document.querySelectorAll(".calc__select"),A=document.querySelector(".kilos-input");q.addEventListener("submit",(e=>{e.preventDefault();const t=document.createElement("div");t.textContent=L,q.append(t),g.checked?(w.forEach((e=>{e.setAttribute("form","data")})),A.setAttribute("form","data")):(w.forEach((e=>{e.setAttribute("form","")})),A.setAttribute("form",""));const o=new FormData(q);(async function(e,t){const o=await fetch(e,{method:"POST",body:t,headers:{"Content-type":"application/json"}});return await o.json()})("http://localhost:250/requests",JSON.stringify(Object.fromEntries(o.entries()))).then((e=>{console.log(e),t.textContent=S})).catch((()=>{t.textContent=x})).finally((()=>{setTimeout((()=>{t.remove(),E.forEach((e=>{e.value=""}))}),2e3)}))}));const k=document.querySelector(".flavor__content");function C(){const e=[];w.forEach((t=>{if(t.getAttribute("data-size")&&("kilos"===t.value?(A.style.display="block",e.push(100*+A.value)):A.style.display="none"),"kilos"!==t.value){e.push(t.getAttribute("data-price"));t.querySelectorAll("option").forEach((o=>{o.value===t.value&&e.push(+o.getAttribute("data-price"))}))}})),b.textContent=e.reduce(((e,t)=>e+t)),document.querySelector(".total-input").value=`${b.textContent}`}(async function(e){const t=await fetch(e);return await t.json()})("http://localhost:250/flavors").then((e=>{e.forEach((({title:e,img:t,alt:o,lines:c})=>{!function(e,t,o,c){const n=document.createElement("div");n.classList.add("flavor__card"),n.innerHTML=`\n        <div class="flavor__card-descr">\n        <div class="flavor__card-title">${e}</div>\n\n    </div>\n    <img src="${t}" alt="${o}" class="flavor__card-img">\n        `,c.forEach((e=>{const t=document.createElement("div");t.classList.add("flavor__card-line"),t.textContent=`${e}`,n.querySelector(".flavor__card-descr").append(t)})),k.append(n)}(e,t,o,c)}))})),w.forEach((e=>{e.addEventListener("change",(()=>{e.querySelector("option").setAttribute("disabled","disabled"),C()}))})),A.addEventListener("input",(()=>{C()}))}));