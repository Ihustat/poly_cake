document.addEventListener("DOMContentLoaded",(()=>{document.querySelector(".questions__content");const e=document.querySelectorAll(".questions__line"),t=document.querySelectorAll(".questions__text"),o=document.querySelectorAll(".questions__line-arrow"),c=[];t.forEach((e=>{c.push(parseInt(window.getComputedStyle(e).height)),e.style.height=0})),e.forEach(((e,n)=>{e.addEventListener("click",(e=>{t[n].classList.toggle("questions__text-active"),o[n].classList.toggle("rotate"),t[n].classList.contains("questions__text-active")?t[n].style.height=`${c[n]+13}px`:t[n].style.height=0}))}));const n=document.querySelector(".examples__slider-inner"),r=document.querySelector(".examples__slider"),s=document.querySelector(".examples__slider-arrow_right"),a=document.querySelectorAll(".examples__slide"),l=document.querySelector(".examples__slider-arrow_left"),i=parseInt(window.getComputedStyle(a[0]).width),d=document.querySelector(".dots__container_examples"),u=[];a.length;r.style.width=2.5*i+"px";let _=0,m=0;function h(e=0){_+=e,m+=e,_>a.length-1&&(_=0),_<0&&(_=a.length-1),u.forEach((e=>{e.classList.remove("dot_active")})),u[_].classList.add("dot_active")}n.style.width=i*a.length+"px",s.addEventListener("click",(()=>{n.append(a[_]),h(1)})),l.addEventListener("click",(()=>{h(-1),n.prepend(a[_])})),a.forEach((e=>{const t=document.createElement("div");t.classList.add("dot"),u.push(t),d.append(t)})),d.addEventListener("click",(e=>{const t=e.target;u.forEach(((e,o)=>{t&&e===t&&(_=0,h(o))}))})),h();const p=document.querySelectorAll(".reviews__slide"),v=document.querySelector(".reviews__dots"),y=[];p.forEach((e=>{const t=document.createElement("div");t.classList.add("dot"),y.push(t),v.append(t)})),v.addEventListener("click",(e=>{const t=e.target;y.forEach(((e,o)=>{e.classList.remove("dot_active"),t&&e===t&&(e.classList.add("dot_active"),p.forEach((e=>{e.style.display="none"})),p[o].style.display="flex")}))})),y[0].click();const f=document.querySelector(".hamburger"),g=document.querySelector(".header__nav");f.addEventListener("click",(()=>{g.classList.toggle("header__nav_active"),f.classList.toggle("hamburger_active")}));const q=document.querySelector(".form"),E=document.querySelectorAll(".form__input"),S=document.querySelector(".form__checkbox"),L="Мы вам перезвоним",x="Отправляем...",b="Что-то пошло не так",w=document.querySelector(".calc__total span"),A=document.querySelectorAll(".calc__select"),k=document.querySelector(".kilos-input");q.addEventListener("submit",(e=>{e.preventDefault();const t=document.createElement("div");t.textContent=x,q.append(t),S.checked?(A.forEach((e=>{e.setAttribute("form","data")})),k.setAttribute("form","data")):(A.forEach((e=>{e.setAttribute("form","")})),k.setAttribute("form",""));const o=new FormData(q);(async function(e,t){const o=await fetch(e,{method:"POST",body:t,headers:{"Content-type":"application/json"}});return await o.json()})("http://localhost:250/requests",JSON.stringify(Object.fromEntries(o.entries()))).then((e=>{console.log(e),t.textContent=L})).catch((()=>{t.textContent=b})).finally((()=>{setTimeout((()=>{t.remove(),E.forEach((e=>{e.value=""}))}),2e3)}))}));const C=document.querySelector(".flavor__content");function $(){const e=[];A.forEach((t=>{if(t.getAttribute("data-size")&&("kilos"===t.value?(k.style.display="block",e.push(100*+k.value)):k.style.display="none"),"kilos"!==t.value){e.push(t.getAttribute("data-price"));t.querySelectorAll("option").forEach((o=>{o.value===t.value&&e.push(+o.getAttribute("data-price"))}))}})),w.textContent=e.reduce(((e,t)=>e+t)),document.querySelector(".total-input").value=`${w.textContent}`}(async function(e){const t=await fetch(e);return await t.json()})("http://localhost:250/flavors").then((e=>{e.forEach((({title:e,img:t,alt:o,lines:c})=>{!function(e,t,o,c){const n=document.createElement("div");n.classList.add("flavor__card"),n.innerHTML=`\n        <div class="flavor__card-descr">\n        <div class="flavor__card-title">${e}</div>\n\n    </div>\n    <img src="${t}" alt="${o}" class="flavor__card-img">\n        `,c.forEach((e=>{const t=document.createElement("div");t.classList.add("flavor__card-line"),t.textContent=`${e}`,n.querySelector(".flavor__card-descr").append(t)})),C.append(n)}(e,t,o,c)}))})),A.forEach((e=>{e.addEventListener("change",(()=>{e.querySelector("option").setAttribute("disabled","disabled"),$()}))})),k.addEventListener("input",(()=>{$()}))}));