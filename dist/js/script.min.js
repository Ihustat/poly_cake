document.addEventListener("DOMContentLoaded",(()=>{document.querySelector(".questions__content");const e=document.querySelectorAll(".questions__line"),t=document.querySelectorAll(".questions__text"),o=document.querySelectorAll(".questions__line-arrow"),c=[];t.forEach((e=>{c.push(parseInt(window.getComputedStyle(e).height)),e.style.height=0})),e.forEach(((e,n)=>{e.addEventListener("click",(e=>{t[n].classList.toggle("questions__text-active"),o[n].classList.toggle("rotate"),t[n].classList.contains("questions__text-active")?t[n].style.height=`${c[n]+13}px`:t[n].style.height=0}))}));const n=document.querySelector(".examples__slider-inner"),r=document.querySelector(".examples__slider-arrow_right"),a=document.querySelectorAll(".examples__slide"),s=document.querySelector(".examples__slider-arrow_left"),l=parseInt(window.getComputedStyle(a[0]).width),i=document.querySelector(".dots__container_examples"),d=[];let u=0;function _(e=0){u+=e,u>a.length-1&&(u=0),u<0&&(u=a.length-1),d.forEach((e=>{e.classList.remove("dot_active")})),d[u].classList.add("dot_active"),n.style.transform=`translateX(-${u*l}px)`}n.style.width=l*a.length+"px",r.addEventListener("click",(()=>{_(1)})),s.addEventListener("click",(()=>{_(-1)})),a.forEach((e=>{const t=document.createElement("div");t.classList.add("dot"),d.push(t),i.append(t)})),i.addEventListener("click",(e=>{const t=e.target;d.forEach(((e,o)=>{t&&e===t&&(u=0,_(o))}))})),_();const m=document.querySelectorAll(".reviews__slide"),h=document.querySelector(".reviews__dots"),v=[];m.forEach((e=>{const t=document.createElement("div");t.classList.add("dot"),v.push(t),h.append(t)})),h.addEventListener("click",(e=>{const t=e.target;v.forEach(((e,o)=>{e.classList.remove("dot_active"),t&&e===t&&(e.classList.add("dot_active"),m.forEach((e=>{e.style.display="none"})),m[o].style.display="flex")}))})),v[0].click();const p=document.querySelector(".hamburger"),f=document.querySelector(".header__nav");p.addEventListener("click",(()=>{f.classList.toggle("header__nav_active"),p.classList.toggle("hamburger_active")}));const y=document.querySelector(".form"),E=document.querySelectorAll(".form__input"),g=document.querySelector(".form__checkbox"),q="Мы вам перезвоним",S="Отправляем...",L="Что-то пошло не так",x=document.querySelector(".calc__total span"),b=document.querySelectorAll(".calc__select"),w=document.querySelector(".kilos-input");y.addEventListener("submit",(e=>{e.preventDefault();const t=document.createElement("div");t.textContent=S,y.append(t),g.checked?(b.forEach((e=>{e.setAttribute("form","data")})),w.setAttribute("form","data")):(b.forEach((e=>{e.setAttribute("form","")})),w.setAttribute("form",""));const o=new FormData(y);(async function(e,t){const o=await fetch(e,{method:"POST",body:t,headers:{"Content-type":"application/json"}});return await o.json()})("http://localhost:250/requests",JSON.stringify(Object.fromEntries(o.entries()))).then((e=>{console.log(e),t.textContent=q})).catch((()=>{t.textContent=L})).finally((()=>{setTimeout((()=>{t.remove(),E.forEach((e=>{e.value=""}))}),2e3)}))}));const A=document.querySelector(".flavor__content");function k(){const e=[];b.forEach((t=>{if(t.getAttribute("data-size")&&("kilos"===t.value?(w.style.display="block",e.push(100*+w.value)):w.style.display="none"),"kilos"!==t.value){e.push(t.getAttribute("data-price"));t.querySelectorAll("option").forEach((o=>{o.value===t.value&&e.push(+o.getAttribute("data-price"))}))}})),x.textContent=e.reduce(((e,t)=>e+t)),document.querySelector(".total-input").value=`${x.textContent}`}(async function(e){const t=await fetch(e);return await t.json()})("http://localhost:250/flavors").then((e=>{e.forEach((({title:e,img:t,alt:o,lines:c})=>{!function(e,t,o,c){const n=document.createElement("div");n.classList.add("flavor__card"),n.innerHTML=`\n        <div class="flavor__card-descr">\n        <div class="flavor__card-title">${e}</div>\n\n    </div>\n    <img src="${t}" alt="${o}" class="flavor__card-img">\n        `,c.forEach((e=>{const t=document.createElement("div");t.classList.add("flavor__card-line"),t.textContent=`${e}`,n.querySelector(".flavor__card-descr").append(t)})),A.append(n)}(e,t,o,c)}))})),b.forEach((e=>{e.addEventListener("change",(()=>{e.querySelector("option").setAttribute("disabled","disabled"),k()}))})),w.addEventListener("input",(()=>{k()}))}));